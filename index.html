<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üê∏ –õ—è–≥—É—à–∫–∞ –ª–æ–≤–∏—Ç –º—É—Ö</title>
    <style>
        /* –ê–ë–°–û–õ–Æ–¢–ù–û –ü–†–û–°–¢–´–ï –°–¢–ò–õ–ò */
        * {
            margin: 0;
            padding: 0;
        }
        
        body {
            background: #2e7d32;
            color: white;
            font-family: Arial, sans-serif;
            text-align: center;
            padding: 10px;
            min-height: 100vh;
        }
        
        h1 {
            color: yellow;
            margin: 10px 0;
            font-size: 22px;
        }
        
        .stats {
            background: #1b5e20;
            padding: 10px;
            border-radius: 10px;
            margin: 10px auto;
            width: 95%;
            display: flex;
            justify-content: space-around;
            font-weight: bold;
        }
        
        .score {
            color: yellow;
            font-size: 20px;
        }
        
        /* –ò–ì–†–û–í–û–ï –ü–û–õ–ï */
        .game-area {
            background: #4caf50;
            border: 5px solid #1b5e20;
            border-radius: 15px;
            height: 60vh;
            max-height: 400px;
            position: relative;
            margin: 10px auto;
            overflow: hidden;
        }
        
        /* –°–ê–ú–ê–Ø –ü–†–û–°–¢–ê–Ø –õ–Ø–ì–£–®–ö–ê –≤ –º–∏—Ä–µ! */
        #frog {
            position: absolute;
            bottom: 20px;
            left: 50%;
            margin-left: -70px; /* –ø–æ–ª–æ–≤–∏–Ω–∞ —à–∏—Ä–∏–Ω—ã */
            width: 140px;
            height: 100px;
            cursor: pointer;
            z-index: 100;
        }
        
        /* –¢–µ–ª–æ - –û–î–ò–ù div —Å –∞–±—Å–æ–ª—é—Ç–Ω—ã–º–∏ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞–º–∏ –¥–ª—è —ç–ª–µ–º–µ–Ω—Ç–æ–≤ */
        .frog-body {
            width: 140px;
            height: 100px;
            background: #4caf50;
            border-radius: 70px 70px 60px 60px; /* –ø—Ä–æ—Å—Ç—ã–µ —Ä–∞–¥–∏—É—Å—ã */
            border: 4px solid #2e7d32;
            position: relative;
        }
        
        /* –ì–ª–∞–∑–∞ - –ê–ë–°–û–õ–Æ–¢–ù–´–ï –ö–û–û–†–î–ò–ù–ê–¢–´ */
        #eye-left {
            position: absolute;
            top: 15px;
            left: 25px;
            width: 30px;
            height: 30px;
            background: white;
            border: 3px solid black;
            border-radius: 15px;
        }
        
        #eye-right {
            position: absolute;
            top: 15px;
            right: 25px;
            width: 30px;
            height: 30px;
            background: white;
            border: 3px solid black;
            border-radius: 15px;
        }
        
        /* –ó—Ä–∞—á–∫–∏ */
        #pupil-left, #pupil-right {
            width: 15px;
            height: 15px;
            background: black;
            border-radius: 8px;
            margin: 6px auto 0;
        }
        
        /* –†–æ—Ç - –û–¢–î–ï–õ–¨–ù–´–ô —ç–ª–µ–º–µ–Ω—Ç —Å —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–æ–π –ø–æ–∑–∏—Ü–∏–µ–π */
        #mouth {
            position: absolute;
            bottom: 25px;
            left: 50px;
            width: 40px;
            height: 15px;
            background: #333;
            border-radius: 0 0 20px 20px;
        }
        
        /* –Ø–∑—ã–∫ */
        #tongue {
            position: absolute;
            bottom: 20px;
            left: 67px;
            width: 6px;
            height: 0;
            background: red;
        }
        
        /* –õ–∏—Å—Ç */
        .leaf {
            position: absolute;
            bottom: 0;
            left: 50%;
            margin-left: -90px;
            width: 180px;
            height: 60px;
            background: #7cb342;
            border-radius: 90px 90px 0 0;
            z-index: 50;
        }
        
        /* –ú—É—à–∫–∏ */
        .fly {
            position: absolute;
            width: 20px;
            height: 20px;
            background: black;
            border-radius: 10px;
            z-index: 80;
        }
        
        /* –ö–Ω–æ–ø–∫–∏ */
        .controls {
            background: #1b5e20;
            padding: 10px;
            border-radius: 10px;
            margin: 10px auto;
            width: 95%;
        }
        
        button {
            background: #ff9800;
            color: white;
            border: none;
            padding: 10px 20px;
            font-size: 16px;
            border-radius: 20px;
            margin: 5px;
            cursor: pointer;
            font-weight: bold;
            min-width: 120px;
        }
        
        button:active {
            background: #ff5722;
        }
        
        button:disabled {
            background: #795548;
        }
        
        /* –°–æ–æ–±—â–µ–Ω–∏—è */
        .message {
            position: absolute;
            color: yellow;
            font-weight: bold;
            font-size: 16px;
            z-index: 200;
        }
    </style>
</head>
<body>
    <h1>üê∏ –õ—è–≥—É—à–∫–∞-–ú—É—Ö–æ–ª–æ–≤ ü¶ü</h1>
    
    <div class="stats">
        <div>–ü–æ–π–º–∞–Ω–æ: <span class="score" id="score">0</span></div>
        <div>–†–µ–∫–æ—Ä–¥: <span class="score" id="record">0</span></div>
        <div>–ú—É—à–∫–∏: <span class="score" id="flyCount">0</span></div>
    </div>
    
    <div class="game-area" id="gameArea">
        <div class="leaf"></div>
        
        <!-- –õ–Ø–ì–£–®–ö–ê —Å –ê–ë–°–û–õ–Æ–¢–ù–´–ú–ò —ç–ª–µ–º–µ–Ω—Ç–∞–º–∏ -->
        <div id="frog">
            <div class="frog-body">
                <div id="eye-left"><div id="pupil-left"></div></div>
                <div id="eye-right"><div id="pupil-right"></div></div>
                <div id="mouth"></div>
                <div id="tongue"></div>
            </div>
        </div>
    </div>
    
    <div class="controls">
        <button id="startBtn">‚ñ∂Ô∏è –ù–ê–ß–ê–¢–¨</button>
        <button id="addBtn">ü¶ü +3</button>
        <button id="resetBtn">üîÑ –°–ë–†–û–°</button>
        <p style="margin-top: 10px; color: #c8e6c9; font-size: 14px;">
            –ù–∞–∂–º–∏ –Ω–∞ –ª—è–≥—É—à–∫—É, —á—Ç–æ–±—ã –ø–æ–π–º–∞—Ç—å –º—É—à–∫—É!
        </p>
    </div>

    <script>
        // ========== –ü–ï–†–ï–ú–ï–ù–ù–´–ï ==========
        let score = 0;
        let record = localStorage.getItem('frogRecord') || 0;
        let gameActive = false;
        let flies = [];
        
        // ========== –≠–õ–ï–ú–ï–ù–¢–´ ==========
        const gameArea = document.getElementById('gameArea');
        const frog = document.getElementById('frog');
        const tongue = document.getElementById('tongue');
        const scoreElement = document.getElementById('score');
        const recordElement = document.getElementById('record');
        const flyCountElement = document.getElementById('flyCount');
        const startBtn = document.getElementById('startBtn');
        const addBtn = document.getElementById('addBtn');
        const resetBtn = document.getElementById('resetBtn');
        
        // ========== –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø ==========
        recordElement.textContent = record;
        
        // ========== –°–ò–°–¢–ï–ú–ê –ú–£–®–ï–ö ==========
        function createFly() {
            const fly = document.createElement('div');
            fly.className = 'fly';
            
            // –ü–æ–∑–∏—Ü–∏—è
            const x = Math.random() * (gameArea.offsetWidth - 30);
            const y = Math.random() * (gameArea.offsetHeight - 100);
            
            fly.style.left = x + 'px';
            fly.style.top = y + 'px';
            
            // –î–≤–∏–∂–µ–Ω–∏–µ
            let angle = Math.random() * Math.PI * 2;
            let speed = 1 + Math.random() * 2;
            let dx = Math.cos(angle) * speed;
            let dy = Math.sin(angle) * speed;
            
            gameArea.appendChild(fly);
            
            const flyData = {
                element: fly,
                x: x,
                y: y,
                dx: dx,
                dy: dy
            };
            
            flies.push(flyData);
            updateFlyCount();
            
            // –î–≤–∏–∂–µ–Ω–∏–µ –º—É—à–∫–∏
            function moveFly() {
                if (!flyData.caught && fly.parentNode) {
                    flyData.x += flyData.dx;
                    flyData.y += flyData.dy;
                    
                    // –û—Ç—Å–∫–æ–∫ –æ—Ç –≥—Ä–∞–Ω–∏—Ü
                    if (flyData.x <= 0 || flyData.x >= gameArea.offsetWidth - 20) {
                        flyData.dx *= -1;
                    }
                    if (flyData.y <= 0 || flyData.y >= gameArea.offsetHeight - 20) {
                        flyData.dy *= -1;
                    }
                    
                    fly.style.left = flyData.x + 'px';
                    fly.style.top = flyData.y + 'px';
                    
                    requestAnimationFrame(moveFly);
                }
            }
            
            moveFly();
            
            // –ê–≤—Ç–æ—É–¥–∞–ª–µ–Ω–∏–µ
            setTimeout(() => {
                if (fly.parentNode && !flyData.caught) {
                    fly.remove();
                    flies = flies.filter(f => f !== flyData);
                    updateFlyCount();
                }
            }, 8000);
        }
        
        function updateFlyCount() {
            flyCountElement.textContent = flies.length;
        }
        
        // ========== –õ–û–í–õ–Ø ==========
        function catchFlies() {
            if (!gameActive) return;
            
            // –Ø–∑—ã–∫
            tongue.style.height = '60px';
            
            // –ü—Ä–æ–≤–µ—Ä–∫–∞
            const frogRect = frog.getBoundingClientRect();
            const gameRect = gameArea.getBoundingClientRect();
            const frogCenterX = frogRect.left + 70;
            const frogCenterY = frogRect.top + 50;
            
            let caught = 0;
            
            flies.forEach(flyData => {
                if (flyData.caught) return;
                
                const flyRect = flyData.element.getBoundingClientRect();
                const flyCenterX = flyRect.left + 10;
                const flyCenterY = flyRect.top + 10;
                
                const distance = Math.sqrt(
                    Math.pow(flyCenterX - frogCenterX, 2) +
                    Math.pow(flyCenterY - frogCenterY, 2)
                );
                
                if (distance < 100) {
                    caught++;
                    flyData.caught = true;
                    flyData.element.style.opacity = '0';
                    flyData.element.style.transform = 'scale(0)';
                    
                    setTimeout(() => {
                        if (flyData.element.parentNode) {
                            flyData.element.remove();
                            flies = flies.filter(f => f !== flyData);
                            updateFlyCount();
                        }
                    }, 300);
                }
            });
            
            // –°—á–µ—Ç
            if (caught > 0) {
                score += caught;
                scoreElement.textContent = score;
                
                if (score > record) {
                    record = score;
                    recordElement.textContent = record;
                    localStorage.setItem('frogRecord', record);
                }
            }
            
            // –£–±—Ä–∞—Ç—å —è–∑—ã–∫
            setTimeout(() => {
                tongue.style.height = '0';
            }, 300);
        }
        
        // ========== –£–ü–†–ê–í–õ–ï–ù–ò–ï ==========
        startBtn.onclick = function() {
            if (gameActive) return;
            
            gameActive = true;
            score = 0;
            scoreElement.textContent = score;
            
            // –û—á–∏—Å—Ç–∫–∞
            flies.forEach(f => f.element.remove());
            flies = [];
            
            // –ú—É—à–∫–∏
            for (let i = 0; i < 5; i++) {
                setTimeout(createFly, i * 400);
            }
            
            startBtn.disabled = true;
            startBtn.textContent = 'üéÆ –ò–ì–†–ê...';
        };
        
        addBtn.onclick = function() {
            if (!gameActive) return;
            
            for (let i = 0; i < 3; i++) {
                setTimeout(createFly, i * 300);
            }
        };
        
        resetBtn.onclick = function() {
            gameActive = false;
            score = 0;
            scoreElement.textContent = score;
            
            flies.forEach(f => f.element.remove());
            flies = [];
            updateFlyCount();
            
            startBtn.disabled = false;
            startBtn.textContent = '‚ñ∂Ô∏è –ù–ê–ß–ê–¢–¨';
        };
        
        // ========== –°–û–ë–´–¢–ò–Ø ==========
        frog.onclick = catchFlies;
        
        // –î–µ–º–æ-–º—É—à–∫–∞
        setTimeout(createFly, 500);
        
        // –ê–≤—Ç–æ–¥–æ–±–∞–≤–ª–µ–Ω–∏–µ
        setInterval(() => {
            if (gameActive && flies.length < 6) {
                createFly();
            }
        }, 3000);
        
        // ========== TELEGRAM ==========
        if (typeof Telegram !== 'undefined') {
            Telegram.WebApp.ready();
            Telegram.WebApp.expand();
        }
    </script>
</body>
</html>
