<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üê∏ –õ—è–≥—É—à–∫–∞ –ª–æ–≤–∏—Ç –º—É—Ö</title>
    <style>
        /* –û–ß–ï–ù–¨ –ü–†–û–°–¢–´–ï –°–¢–ò–õ–ò - –±–µ–∑ —Å–ª–æ–∂–Ω—ã—Ö —ç—Ñ—Ñ–µ–∫—Ç–æ–≤ */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            background: #2e7d32;
            color: white;
            font-family: 'Arial', sans-serif;
            text-align: center;
            padding: 10px;
            min-height: 100vh;
            overflow: hidden;
        }
        
        .header {
            background: #1b5e20;
            padding: 15px;
            border-radius: 15px;
            margin-bottom: 15px;
            border: 3px solid #0d3b1c;
        }
        
        h1 {
            color: #ffeb3b;
            margin-bottom: 10px;
            font-size: 24px;
        }
        
        .stats {
            display: flex;
            justify-content: space-around;
            font-size: 18px;
            font-weight: bold;
        }
        
        .score {
            color: #ffeb3b;
            font-size: 22px;
        }
        
        /* –ò–ì–†–û–í–û–ï –ü–û–õ–ï */
        .game-area {
            background: #4caf50;
            border: 5px solid #1b5e20;
            border-radius: 20px;
            height: 60vh;
            max-height: 500px;
            position: relative;
            overflow: hidden;
            margin: 0 auto 20px;
        }
        
        /* –°–£–ü–ï–† –ü–†–û–°–¢–ê–Ø –õ–Ø–ì–£–®–ö–ê - –±–µ–∑ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–æ–≤ */
        #frog {
            position: absolute;
            bottom: 30px;
            left: 50%;
            transform: translateX(-50%);
            width: 140px;
            height: 100px;
            cursor: pointer;
            z-index: 100;
        }
        
        /* –¢–µ–ª–æ –ª—è–≥—É—à–∫–∏ - –û–î–ò–ù –ü–†–û–°–¢–û–ô –≠–õ–ï–ú–ï–ù–¢ */
        .frog-body {
            width: 140px;
            height: 100px;
            background: #4caf50;
            border-radius: 50% 50% 40% 40%;
            border: 5px solid #2e7d32;
            position: relative;
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
        }
        
        /* –ü—Ä–æ—Å—Ç—ã–µ –≥–ª–∞–∑–∞ - –ö–í–ê–î–†–ê–¢–ù–´–ï –¥–ª—è –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç–∏ */
        .eye {
            position: absolute;
            top: 20px;
            width: 30px;
            height: 30px;
            background: white;
            border: 3px solid black;
            border-radius: 50%;
        }
        
        .eye-left {
            left: 25px;
        }
        
        .eye-right {
            right: 25px;
        }
        
        /* –ó—Ä–∞—á–∫–∏ */
        .pupil {
            width: 15px;
            height: 15px;
            background: black;
            border-radius: 50%;
            margin: 5px auto 0;
        }
        
        /* –ü—Ä–æ—Å—Ç–æ–π —Ä–æ—Ç */
        .mouth {
            position: absolute;
            bottom: 25px;
            left: 50%;
            transform: translateX(-50%);
            width: 40px;
            height: 15px;
            background: #333;
            border-radius: 0 0 20px 20px;
        }
        
        /* –ü—Ä–æ—Å—Ç–æ–π —è–∑—ã–∫ */
        .tongue {
            position: absolute;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            width: 6px;
            height: 0;
            background: #ff5252;
            transition: height 0.3s;
            z-index: 90;
        }
        
        /* –õ–∏—Å—Ç –ø–æ–¥ –ª—è–≥—É—à–∫–æ–π */
        .leaf {
            position: absolute;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 180px;
            height: 60px;
            background: #7cb342;
            border-radius: 50% 50% 0 0;
            z-index: 50;
        }
        
        /* –ü—Ä–æ—Å—Ç—ã–µ –º—É—à–∫–∏ */
        .fly {
            position: absolute;
            width: 20px;
            height: 20px;
            background: black;
            border-radius: 50%;
            animation: flyAround 4s infinite linear;
            z-index: 80;
        }
        
        @keyframes flyAround {
            0% { transform: translate(0, 0); }
            25% { transform: translate(80px, -60px); }
            50% { transform: translate(40px, -100px); }
            75% { transform: translate(-40px, -60px); }
            100% { transform: translate(0, 0); }
        }
        
        .fly.caught {
            animation: none;
            opacity: 0;
            transform: scale(0);
            transition: all 0.5s;
        }
        
        /* –ö–Ω–æ–ø–∫–∏ */
        .controls {
            background: #1b5e20;
            padding: 15px;
            border-radius: 15px;
            border: 3px solid #0d3b1c;
        }
        
        button {
            background: #ff9800;
            color: white;
            border: none;
            padding: 12px 25px;
            font-size: 16px;
            border-radius: 25px;
            margin: 5px;
            cursor: pointer;
            font-weight: bold;
            min-width: 140px;
        }
        
        button:hover {
            background: #ff5722;
        }
        
        button:disabled {
            background: #795548;
            cursor: not-allowed;
        }
        
        /* –í—Å–ø–ª—ã–≤–∞—é—â–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è */
        .message {
            position: absolute;
            color: #ffeb3b;
            font-weight: bold;
            font-size: 18px;
            animation: floatUp 1s forwards;
            pointer-events: none;
            z-index: 200;
            text-shadow: 2px 2px 0 #000;
        }
        
        @keyframes floatUp {
            0% { transform: translateY(0); opacity: 1; }
            100% { transform: translateY(-50px); opacity: 0; }
        }
        
        /* –ê–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å */
        @media (max-width: 600px) {
            .game-area {
                height: 50vh;
            }
            
            #frog {
                width: 120px;
                height: 85px;
            }
            
            .frog-body {
                width: 120px;
                height: 85px;
            }
            
            .eye {
                width: 25px;
                height: 25px;
            }
            
            button {
                padding: 10px 20px;
                min-width: 120px;
                font-size: 14px;
            }
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>üê∏ –õ—è–≥—É—à–∫–∞-–ú—É—Ö–æ–ª–æ–≤ ü¶ü</h1>
        <div class="stats">
            <div>–ü–æ–π–º–∞–Ω–æ: <span class="score" id="score">0</span></div>
            <div>–†–µ–∫–æ—Ä–¥: <span class="score" id="record">0</span></div>
            <div>–ú—É—à–∫–∏: <span class="score" id="flyCount">0</span></div>
        </div>
    </div>
    
    <div class="game-area" id="gameArea">
        <!-- –õ–∏—Å—Ç -->
        <div class="leaf"></div>
        
        <!-- –õ—è–≥—É—à–∫–∞ - –ü–†–û–°–¢–ê–Ø –°–¢–†–£–ö–¢–£–†–ê -->
        <div id="frog">
            <div class="frog-body">
                <div class="eye eye-left"><div class="pupil"></div></div>
                <div class="eye eye-right"><div class="pupil"></div></div>
                <div class="mouth"></div>
                <div class="tongue" id="tongue"></div>
            </div>
        </div>
        
        <!-- –ú—É—à–∫–∏ –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª—è—Ç—å—Å—è –∑–¥–µ—Å—å -->
    </div>
    
    <div class="controls">
        <button id="startBtn">‚ñ∂Ô∏è –ù–ê–ß–ê–¢–¨ –ò–ì–†–£</button>
        <button id="addBtn">ü¶ü +3 –ú—É—à–∫–∏</button>
        <button id="resetBtn">üîÑ –ó–ê–ù–û–í–û</button>
        <p style="margin-top: 10px; color: #c8e6c9;">–ù–∞–∂–º–∏ –Ω–∞ –ª—è–≥—É—à–∫—É, —á—Ç–æ–±—ã –ø–æ–π–º–∞—Ç—å –º—É—à–∫—É!</p>
    </div>

    <script>
        // ========== –ü–ï–†–ï–ú–ï–ù–ù–´–ï –ò–ì–†–´ ==========
        let score = 0;
        let record = localStorage.getItem('frogRecord') || 0;
        let gameActive = false;
        let flies = [];
        
        // ========== –ü–û–õ–£–ß–ê–ï–ú –≠–õ–ï–ú–ï–ù–¢–´ ==========
        const gameArea = document.getElementById('gameArea');
        const frog = document.getElementById('frog');
        const tongue = document.getElementById('tongue');
        const scoreElement = document.getElementById('score');
        const recordElement = document.getElementById('record');
        const flyCountElement = document.getElementById('flyCount');
        const startBtn = document.getElementById('startBtn');
        const addBtn = document.getElementById('addBtn');
        const resetBtn = document.getElementById('resetBtn');
        
        // ========== –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø ==========
        recordElement.textContent = record;
        
        // ========== –§–£–ù–ö–¶–ò–ò –î–õ–Ø –ú–£–®–ï–ö ==========
        function createFly() {
            const fly = document.createElement('div');
            fly.className = 'fly';
            
            // –°–ª—É—á–∞–π–Ω–∞—è –Ω–∞—á–∞–ª—å–Ω–∞—è –ø–æ–∑–∏—Ü–∏—è
            const startX = 30 + Math.random() * (gameArea.offsetWidth - 60);
            const startY = 30 + Math.random() * (gameArea.offsetHeight - 100);
            
            fly.style.left = startX + 'px';
            fly.style.top = startY + 'px';
            
            // –°–ª—É—á–∞–π–Ω–∞—è —Å–∫–æ—Ä–æ—Å—Ç—å
            const speed = 3 + Math.random() * 3;
            fly.style.animationDuration = speed + 's';
            
            gameArea.appendChild(fly);
            flies.push({
                element: fly,
                x: startX,
                y: startY
            });
            
            updateFlyCount();
            
            // –ê–≤—Ç–æ—É–¥–∞–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑ –≤—Ä–µ–º—è
            setTimeout(() => {
                if (fly.parentNode && !fly.classList.contains('caught')) {
                    fly.remove();
                    flies = flies.filter(f => f.element !== fly);
                    updateFlyCount();
                }
            }, 10000);
        }
        
        function updateFlyCount() {
            flyCountElement.textContent = flies.length;
        }
        
        // ========== –§–£–ù–ö–¶–ò–ò –î–õ–Ø –°–û–û–ë–©–ï–ù–ò–ô ==========
        function showMessage(text, x, y) {
            const msg = document.createElement('div');
            msg.className = 'message';
            msg.textContent = text;
            msg.style.left = x + 'px';
            msg.style.top = y + 'px';
            gameArea.appendChild(msg);
            
            setTimeout(() => {
                if (msg.parentNode) msg.remove();
            }, 1000);
        }
        
        // ========== –õ–û–í–õ–Ø –ú–£–®–ï–ö ==========
        function catchFlies() {
            if (!gameActive) {
                showMessage('–°–Ω–∞—á–∞–ª–∞ –Ω–∞—á–Ω–∏ –∏–≥—Ä—É!', 50, 50);
                return;
            }
            
            // 1. –ê–Ω–∏–º–∞—Ü–∏—è —è–∑—ã–∫–∞
            tongue.style.height = '80px';
            
            // 2. –ê–Ω–∏–º–∞—Ü–∏—è –ª—è–≥—É—à–∫–∏
            frog.style.transform = 'translateX(-50%) scale(1.1)';
            setTimeout(() => {
                frog.style.transform = 'translateX(-50%) scale(1)';
            }, 200);
            
            // 3. –ó–≤—É–∫ (–µ—Å–ª–∏ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è)
            try {
                const audio = new Audio('https://assets.mixkit.co/sfx/preview/mixkit-frog-croak-760.mp3');
                audio.volume = 0.2;
                audio.play().catch(() => {});
            } catch(e) {}
            
            // 4. –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–ø–∞–¥–∞–Ω–∏—è
            const frogRect = frog.getBoundingClientRect();
            const gameRect = gameArea.getBoundingClientRect();
            const frogCenterX = frogRect.left + frogRect.width / 2;
            const frogCenterY = frogRect.top + frogRect.height / 2;
            
            let caughtCount = 0;
            
            flies.forEach((flyObj, index) => {
                const fly = flyObj.element;
                if (fly.classList.contains('caught')) return;
                
                const flyRect = fly.getBoundingClientRect();
                const flyCenterX = flyRect.left + flyRect.width / 2;
                const flyCenterY = flyRect.top + flyRect.height / 2;
                
                // –ü—Ä–æ—Å—Ç–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏—è
                const distance = Math.sqrt(
                    Math.pow(flyCenterX - frogCenterX, 2) +
                    Math.pow(flyCenterY - frogCenterY, 2)
                );
                
                // –ë–æ–ª—å—à–æ–π —Ä–∞–¥–∏—É—Å –ø–æ–ø–∞–¥–∞–Ω–∏—è!
                if (distance < 120) {
                    caughtCount++;
                    fly.classList.add('caught');
                    
                    // –ü–æ–∫–∞–∑–∞—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ
                    showMessage('+1', 
                        flyRect.left - gameRect.left,
                        flyRect.top - gameRect.top
                    );
                    
                    // –ó–≤—É–∫ –ø–æ–µ–¥–∞–Ω–∏—è
                    try {
                        const eatSound = new Audio('https://assets.mixkit.co/sfx/preview/mixkit-bite-crunch-2290.mp3');
                        eatSound.volume = 0.2;
                        eatSound.play().catch(() => {});
                    } catch(e) {}
                    
                    // –£–¥–∞–ª–∏—Ç—å –º—É—à–∫—É
                    setTimeout(() => {
                        if (fly.parentNode) {
                            fly.remove();
                            flies.splice(index, 1);
                            updateFlyCount();
                        }
                    }, 500);
                }
            });
            
            // 5. –û–±–Ω–æ–≤–∏—Ç—å —Å—á–µ—Ç
            if (caughtCount > 0) {
                score += caughtCount;
                scoreElement.textContent = score;
                
                // –û–±–Ω–æ–≤–∏—Ç—å —Ä–µ–∫–æ—Ä–¥
                if (score > record) {
                    record = score;
                    recordElement.textContent = record;
                    localStorage.setItem('frogRecord', record);
                    
                    if (score % 5 === 0) {
                        showMessage(`–†–µ–∫–æ—Ä–¥! ${score}`, 
                            frogRect.left - gameRect.left + 70,
                            frogRect.top - gameRect.top - 30
                        );
                    }
                }
            } else if (flies.length > 0) {
                showMessage('–ú–∏–º–æ!', 
                    frogRect.left - gameRect.left + 70,
                    frogRect.top - gameRect.top - 30
                );
            }
            
            // 6. –£–±—Ä–∞—Ç—å —è–∑—ã–∫
            setTimeout(() => {
                tongue.style.height = '0';
            }, 300);
            
            // 7. –î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—É—é –º—É—à–∫—É, –µ—Å–ª–∏ –ø–æ–π–º–∞–ª–∏
            if (caughtCount > 0 && flies.length < 8) {
                setTimeout(createFly, 500);
            }
        }
        
        // ========== –£–ü–†–ê–í–õ–ï–ù–ò–ï –ò–ì–†–û–ô ==========
        startBtn.addEventListener('click', () => {
            if (gameActive) return;
            
            gameActive = true;
            score = 0;
            scoreElement.textContent = score;
            
            // –û—á–∏—Å—Ç–∏—Ç—å —Å—Ç–∞—Ä—ã—Ö –º—É—à–µ–∫
            flies.forEach(fly => {
                if (fly.element.parentNode) {
                    fly.element.remove();
                }
            });
            flies = [];
            
            // –°–æ–∑–¥–∞—Ç—å –Ω–∞—á–∞–ª—å–Ω—ã—Ö –º—É—à–µ–∫
            for (let i = 0; i < 5; i++) {
                setTimeout(() => createFly(), i * 300);
            }
            
            // –û–±–Ω–æ–≤–∏—Ç—å –∫–Ω–æ–ø–∫—É
            startBtn.disabled = true;
            startBtn.textContent = 'üéÆ –ò–ì–†–ê –ò–î–ï–¢...';
            startBtn.style.background = '#ff5722';
            
            // –°–æ–æ–±—â–µ–Ω–∏–µ
            showMessage('–ò–≥—Ä–∞ –Ω–∞—á–∞–ª–∞—Å—å!', 
                gameArea.offsetWidth / 2 - 60,
                50
            );
        });
        
        addBtn.addEventListener('click', () => {
            if (!gameActive) {
                showMessage('–°–Ω–∞—á–∞–ª–∞ –Ω–∞—á–Ω–∏ –∏–≥—Ä—É!', 50, 50);
                return;
            }
            
            for (let i = 0; i < 3; i++) {
                setTimeout(() => createFly(), i * 200);
            }
            
            showMessage('+3 –º—É—à–∫–∏', 
                gameArea.offsetWidth / 2 - 40,
                50
            );
        });
        
        resetBtn.addEventListener('click', () => {
            gameActive = false;
            score = 0;
            scoreElement.textContent = score;
            
            // –£–¥–∞–ª–∏—Ç—å –≤—Å–µ –º—É—à–∫–∏
            flies.forEach(fly => {
                if (fly.element.parentNode) {
                    fly.element.remove();
                }
            });
            flies = [];
            updateFlyCount();
            
            // –°–±—Ä–æ—Å–∏—Ç—å –∫–Ω–æ–ø–∫—É
            startBtn.disabled = false;
            startBtn.textContent = '‚ñ∂Ô∏è –ù–ê–ß–ê–¢–¨ –ò–ì–†–£';
            startBtn.style.background = '#ff9800';
        });
        
        // ========== –ö–õ–ò–ö –ü–û –õ–Ø–ì–£–®–ö–ï ==========
        frog.addEventListener('click', catchFlies);
        
        // ========== –ê–í–¢–û–ú–ê–¢–ò–ß–ï–°–ö–ò–ï –î–ï–ô–°–¢–í–ò–Ø ==========
        // –î–æ–±–∞–≤–∏—Ç—å –¥–µ–º–æ-–º—É—à–∫—É –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
        setTimeout(() => {
            if (!gameActive) {
                createFly();
                showMessage('–ù–∞–∂–º–∏ "–ù–ê–ß–ê–¢–¨ –ò–ì–†–£"', 
                    gameArea.offsetWidth / 2 - 70,
                    50
                );
            }
        }, 1000);
        
        // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –¥–æ–±–∞–≤–ª—è—Ç—å –º—É—à–∫–∏
        setInterval(() => {
            if (gameActive && flies.length < 6 && Math.random() > 0.5) {
                createFly();
            }
        }, 4000);
        
        // ========== TELEGRAM –ò–ù–¢–ï–ì–†–ê–¶–ò–Ø ==========
        // –ü—Ä–æ—Å—Ç–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è, –µ—Å–ª–∏ –≤ Telegram
        if (typeof Telegram !== 'undefined' && Telegram.WebApp) {
            Telegram.WebApp.ready();
            Telegram.WebApp.expand();
            
            // –ü—Ä–æ—Å—Ç–∞—è –∫–Ω–æ–ø–∫–∞ "–ò–≥—Ä–∞—Ç—å —Å–Ω–æ–≤–∞"
            const playAgain = () => {
                resetBtn.click();
                startBtn.click();
            };
            
            // –ú–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –∫–Ω–æ–ø–∫—É –≤ Telegram
            setTimeout(() => {
                if (Telegram.WebApp.MainButton) {
                    Telegram.WebApp.MainButton.setText('üîÑ –ò–≥—Ä–∞—Ç—å —Å–Ω–æ–≤–∞');
                    Telegram.WebApp.MainButton.onClick(playAgain);
                }
            }, 2000);
        }
        
        // ========== –ö–û–ù–°–û–õ–¨ –î–õ–Ø –û–¢–õ–ê–î–ö–ò ==========
        console.log('üê∏ –ò–≥—Ä–∞ "–õ—è–≥—É—à–∫–∞-–ú—É—Ö–æ–ª–æ–≤" –∑–∞–≥—Ä—É–∂–µ–Ω–∞!');
        console.log('üéØ –ù–∞–∂–º–∏ –Ω–∞ –ª—è–≥—É—à–∫—É –∏–ª–∏ –∫–Ω–æ–ø–∫—É "–ù–ê–ß–ê–¢–¨ –ò–ì–†–£"');
    </script>
</body>
</html>
