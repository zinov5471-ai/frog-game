<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üê∏ –õ—è–≥—É—à–∫–∞-–ú—É—Ö–æ–ª–æ–≤</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            background: linear-gradient(#1b5e20, #2e7d32);
            color: white;
            font-family: Arial, sans-serif;
            text-align: center;
            padding: 20px;
            min-height: 100vh;
        }
        
        .container {
            max-width: 600px;
            margin: 0 auto;
        }
        
        h1 {
            margin: 20px 0;
            color: #ffeb3b;
            text-shadow: 2px 2px 0 #000;
        }
        
        .game-area {
            background: #4caf50;
            border: 8px solid #1b5e20;
            border-radius: 25px;
            height: 400px;
            position: relative;
            overflow: hidden;
            margin: 20px auto;
            box-shadow: 0 10px 30px rgba(0,0,0,0.5);
        }
        
        /* –õ–Ø–ì–£–®–ö–ê - –æ—á–µ–Ω—å –ø—Ä–æ—Å—Ç–∞—è –∏ –≤–∏–¥–∏–º–∞—è */
        .frog {
            position: absolute;
            bottom: 50px;
            left: 50%;
            transform: translateX(-50%);
            width: 150px;
            height: 120px;
            background: #4caf50;
            border-radius: 50%;
            cursor: pointer;
            border: 6px solid #2e7d32;
            box-shadow: 0 10px 20px rgba(0,0,0,0.4);
            z-index: 100;
        }
        
        .eye {
            position: absolute;
            top: 25px;
            width: 35px;
            height: 35px;
            background: white;
            border-radius: 50%;
            border: 3px solid black;
        }
        
        .eye-left {
            left: 25px;
        }
        
        .eye-right {
            right: 25px;
        }
        
        .pupil {
            width: 15px;
            height: 15px;
            background: black;
            border-radius: 50%;
            margin: 7px auto;
        }
        
        .mouth {
            position: absolute;
            bottom: 25px;
            left: 50%;
            transform: translateX(-50%);
            width: 50px;
            height: 25px;
            background: #333;
            border-radius: 0 0 25px 25px;
        }
        
        .tongue {
            position: absolute;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%) scaleY(0);
            width: 8px;
            height: 0;
            background: red;
            transition: 0.3s;
            border-radius: 4px;
            z-index: 90;
        }
        
        /* –ú—É—à–∫–∏ */
        .fly {
            position: absolute;
            width: 25px;
            height: 25px;
            background: black;
            border-radius: 50%;
            animation: fly 3s infinite;
            box-shadow: 0 0 10px rgba(0,0,0,0.5);
        }
        
        @keyframes fly {
            0% { transform: translate(0, 0); }
            25% { transform: translate(50px, -40px); }
            50% { transform: translate(-30px, -60px); }
            75% { transform: translate(40px, -20px); }
            100% { transform: translate(0, 0); }
        }
        
        .fly.eaten {
            animation: none;
            opacity: 0;
            transform: scale(0);
            transition: 0.5s;
        }
        
        /* –õ–∏—Å—Ç */
        .leaf {
            position: absolute;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 200px;
            height: 80px;
            background: #8bc34a;
            border-radius: 100px 100px 0 0;
            z-index: 50;
        }
        
        /* –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ */
        .stats {
            background: rgba(0, 100, 0, 0.8);
            padding: 15px;
            border-radius: 15px;
            margin: 20px auto;
            font-size: 22px;
            font-weight: bold;
            display: flex;
            justify-content: space-around;
            max-width: 500px;
        }
        
        .score {
            color: #ffeb3b;
            font-size: 28px;
        }
        
        /* –ö–Ω–æ–ø–∫–∏ */
        .buttons {
            margin: 20px;
        }
        
        button {
            background: linear-gradient(#ff9800, #f57c00);
            color: white;
            border: none;
            padding: 15px 30px;
            font-size: 18px;
            border-radius: 25px;
            margin: 10px;
            cursor: pointer;
            font-weight: bold;
            border: 3px solid #e65100;
            min-width: 180px;
        }
        
        button:hover {
            background: linear-gradient(#ff5722, #e64a19);
        }
        
        button:active {
            transform: scale(0.95);
        }
        
        button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }
        
        /* –í—Å–ø–ª—ã–≤–∞—é—â–∏–π —Ç–µ–∫—Å—Ç */
        .popup {
            position: absolute;
            color: #ffeb3b;
            font-weight: bold;
            font-size: 20px;
            animation: floatUp 1s forwards;
            pointer-events: none;
            z-index: 1000;
            text-shadow: 2px 2px 0 #000;
        }
        
        @keyframes floatUp {
            0% { transform: translateY(0); opacity: 1; }
            100% { transform: translateY(-50px); opacity: 0; }
        }
        
        /* –ú–æ–±–∏–ª—å–Ω–∞—è –∞–¥–∞–ø—Ç–∞—Ü–∏—è */
        @media (max-width: 600px) {
            .game-area {
                height: 300px;
            }
            
            .frog {
                width: 120px;
                height: 100px;
            }
            
            button {
                padding: 12px 20px;
                font-size: 16px;
                min-width: 140px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üê∏ –õ—è–≥—É—à–∫–∞-–ú—É—Ö–æ–ª–æ–≤ ü¶ü</h1>
        
        <div class="stats">
            <div>–ü–æ–π–º–∞–Ω–æ: <span class="score" id="score">0</span></div>
            <div>–†–µ–∫–æ—Ä–¥: <span class="score" id="record">0</span></div>
            <div>–ú—É—à–∫–∏: <span class="score" id="flyCount">0</span></div>
        </div>
        
        <div class="game-area" id="gameArea">
            <div class="leaf"></div>
            
            <div class="frog" id="frog">
                <div class="eye eye-left"><div class="pupil"></div></div>
                <div class="eye eye-right"><div class="pupil"></div></div>
                <div class="mouth"></div>
                <div class="tongue" id="tongue"></div>
            </div>
        </div>
        
        <div class="buttons">
            <button id="startBtn">‚ñ∂Ô∏è –ù–ê–ß–ê–¢–¨ –ò–ì–†–£</button>
            <button id="addBtn">ü¶ü +3 –ú—É—à–∫–∏</button>
            <button id="resetBtn">üîÑ –ó–ê–ù–û–í–û</button>
        </div>
        
        <p>–ñ–º–∏ –Ω–∞ –ª—è–≥—É—à–∫—É, —á—Ç–æ–±—ã –ø–æ–π–º–∞—Ç—å –º—É—à–∫—É!</p>
        <p style="color: #c8e6c9; margin-top: 10px;">üéØ –õ—è–≥—É—à–∫–∞ –ª–æ–≤–∏—Ç –≤—Å–µ –º—É—à–µ–∫ –≤–æ–∫—Ä—É–≥ —Å–µ–±—è</p>
    </div>

    <script>
        // –≠–ª–µ–º–µ–Ω—Ç—ã
        const gameArea = document.getElementById('gameArea');
        const frog = document.getElementById('frog');
        const tongue = document.getElementById('tongue');
        const scoreElement = document.getElementById('score');
        const recordElement = document.getElementById('record');
        const flyCountElement = document.getElementById('flyCount');
        const startBtn = document.getElementById('startBtn');
        const addBtn = document.getElementById('addBtn');
        const resetBtn = document.getElementById('resetBtn');
        
        // –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –∏–≥—Ä—ã
        let score = 0;
        let record = localStorage.getItem('frogRecord') || 0;
        let gameActive = false;
        let flies = [];
        
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
        recordElement.textContent = record;
        
        // –ó–≤—É–∫–∏
        function playSound(url) {
            try {
                const audio = new Audio(url);
                audio.volume = 0.3;
                audio.play();
            } catch(e) {
                // –ò–≥–Ω–æ—Ä–∏—Ä—É–µ–º –æ—à–∏–±–∫–∏ –∑–≤—É–∫–∞
            }
        }
        
        // –°–æ–∑–¥–∞—Ç—å –º—É—à–∫—É
        function createFly() {
            if (!gameActive && flies.length > 0) return;
            
            const fly = document.createElement('div');
            fly.className = 'fly';
            
            // –°–ª—É—á–∞–π–Ω–∞—è –ø–æ–∑–∏—Ü–∏—è
            const x = 30 + Math.random() * (gameArea.offsetWidth - 60);
            const y = 30 + Math.random() * (gameArea.offsetHeight - 150);
            
            fly.style.left = x + 'px';
            fly.style.top = y + 'px';
            
            // –°–ª—É—á–∞–π–Ω–∞—è —Å–∫–æ—Ä–æ—Å—Ç—å
            const speed = 2 + Math.random() * 3;
            fly.style.animationDuration = speed + 's';
            
            gameArea.appendChild(fly);
            flies.push(fly);
            updateFlyCount();
            
            // –ê–≤—Ç–æ—É–¥–∞–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑ 15 —Å–µ–∫—É–Ω–¥
            setTimeout(() => {
                if (fly.parentNode && !fly.classList.contains('eaten')) {
                    fly.remove();
                    flies = flies.filter(f => f !== fly);
                    updateFlyCount();
                }
            }, 15000);
        }
        
        // –û–±–Ω–æ–≤–∏—Ç—å —Å—á–µ—Ç—á–∏–∫ –º—É—à–µ–∫
        function updateFlyCount() {
            flyCountElement.textContent = flies.length;
        }
        
        // –°–æ–∑–¥–∞—Ç—å –≤—Å–ø–ª—ã–≤–∞—é—â–∏–π —Ç–µ–∫—Å—Ç
        function createPopup(text, x, y) {
            const popup = document.createElement('div');
            popup.className = 'popup';
            popup.textContent = text;
            popup.style.left = x + 'px';
            popup.style.top = y + 'px';
            gameArea.appendChild(popup);
            
            setTimeout(() => popup.remove(), 1000);
        }
        
        // –õ–æ–≤–ª—è –º—É—à–µ–∫
        function catchFlies() {
            if (!gameActive) {
                createPopup('–°–Ω–∞—á–∞–ª–∞ –Ω–∞—á–Ω–∏ –∏–≥—Ä—É!', 100, 100);
                return;
            }
            
            // –ê–Ω–∏–º–∞—Ü–∏—è —è–∑—ã–∫–∞
            tongue.style.height = '100px';
            tongue.style.transform = 'translateX(-50%) scaleY(1)';
            
            // –ó–≤—É–∫ –∫–≤–∞–∫–∞–Ω—å—è
            playSound('https://assets.mixkit.co/sfx/preview/mixkit-frog-croak-760.mp3');
            
            // –ê–Ω–∏–º–∞—Ü–∏—è –ª—è–≥—É—à–∫–∏
            frog.style.transform = 'translateX(-50%) scale(1.1)';
            setTimeout(() => {
                frog.style.transform = 'translateX(-50%) scale(1)';
            }, 200);
            
            // –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–∞–∂–¥—É—é –º—É—à–∫—É
            let caught = 0;
            const frogRect = frog.getBoundingClientRect();
            const gameRect = gameArea.getBoundingClientRect();
            
            flies.forEach((fly, index) => {
                if (fly.classList.contains('eaten')) return;
                
                const flyRect = fly.getBoundingClientRect();
                
                // –ü—Ä–æ—Å—Ç–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏—è
                const distance = Math.sqrt(
                    Math.pow(flyRect.left - frogRect.left, 2) +
                    Math.pow(flyRect.top - frogRect.top, 2)
                );
                
                // –ï—Å–ª–∏ –º—É—à–∫–∞ –≤ —Ä–∞–¥–∏—É—Å–µ 150px
                if (distance < 150) {
                    caught++;
                    
                    // –ü–æ–º–µ—Ç–∏—Ç—å –∫–∞–∫ –ø–æ–π–º–∞–Ω–Ω—É—é
                    fly.classList.add('eaten');
                    
                    // –ó–≤—É–∫ –ø–æ–µ–¥–∞–Ω–∏—è
                    playSound('https://assets.mixkit.co/sfx/preview/mixkit-bite-crunch-2290.mp3');
                    
                    // –í—Å–ø–ª—ã–≤–∞—é—â–∏–π —Ç–µ–∫—Å—Ç
                    createPopup('+1 üéØ', 
                        flyRect.left - gameRect.left + 15,
                        flyRect.top - gameRect.top
                    );
                    
                    // –£–¥–∞–ª–∏—Ç—å —á–µ—Ä–µ–∑ 0.5 —Å–µ–∫—É–Ω–¥
                    setTimeout(() => {
                        if (fly.parentNode) {
                            fly.remove();
                            flies.splice(index, 1);
                            updateFlyCount();
                        }
                    }, 500);
                }
            });
            
            // –û–±–Ω–æ–≤–∏—Ç—å —Å—á–µ—Ç
            if (caught > 0) {
                score += caught;
                scoreElement.textContent = score;
                
                // –û–±–Ω–æ–≤–∏—Ç—å —Ä–µ–∫–æ—Ä–¥
                if (score > record) {
                    record = score;
                    recordElement.textContent = record;
                    localStorage.setItem('frogRecord', record);
                    
                    if (score % 10 === 0) {
                        createPopup(`–†–µ–∫–æ—Ä–¥: ${score}! üèÜ`, 
                            frogRect.left - gameRect.left + 75,
                            frogRect.top - gameRect.top
                        );
                    }
                }
            } else if (flies.length > 0) {
                createPopup('–ü—Ä–æ–º–∞—Ö! üëé', 
                    frogRect.left - gameRect.left + 75,
                    frogRect.top - gameRect.top
                );
            }
            
            // –£–±—Ä–∞—Ç—å —è–∑—ã–∫
            setTimeout(() => {
                tongue.style.height = '0';
                tongue.style.transform = 'translateX(-50%) scaleY(0)';
            }, 300);
        }
        
        // –ù–∞—á–∞—Ç—å –∏–≥—Ä—É
        startBtn.addEventListener('click', () => {
            if (gameActive) return;
            
            gameActive = true;
            score = 0;
            scoreElement.textContent = score;
            
            // –û—á–∏—Å—Ç–∏—Ç—å —Å—Ç–∞—Ä—ã—Ö –º—É—à–µ–∫
            flies.forEach(fly => fly.remove());
            flies = [];
            
            // –°–æ–∑–¥–∞—Ç—å 5 –º—É—à–µ–∫
            for (let i = 0; i < 5; i++) {
                setTimeout(() => createFly(), i * 300);
            }
            
            startBtn.disabled = true;
            startBtn.textContent = 'üéÆ –ò–ì–†–ê –ò–î–ï–¢...';
            startBtn.style.background = 'linear-gradient(#ff5722, #e64a19)';
            
            createPopup('–ò–≥—Ä–∞ –Ω–∞—á–∞–ª–∞—Å—å!', 
                gameArea.offsetWidth / 2 - 50,
                gameArea.offsetHeight / 2
            );
        });
        
        // –î–æ–±–∞–≤–∏—Ç—å –º—É—à–µ–∫
        addBtn.addEventListener('click', () => {
            if (!gameActive) {
                createPopup('–°–Ω–∞—á–∞–ª–∞ –Ω–∞—á–Ω–∏ –∏–≥—Ä—É!', 
                    gameArea.offsetWidth / 2 - 50,
                    gameArea.offsetHeight / 2
                );
                return;
            }
            
            for (let i = 0; i < 3; i++) {
                setTimeout(() => createFly(), i * 200);
            }
            
            createPopup('+3 –º—É—à–∫–∏ ü¶ü', 
                gameArea.offsetWidth / 2 - 30,
                gameArea.offsetHeight / 2
            );
        });
        
        // –°–±—Ä–æ—Å –∏–≥—Ä—ã
        resetBtn.addEventListener('click', () => {
            gameActive = false;
            score = 0;
            scoreElement.textContent = score;
            
            flies.forEach(fly => fly.remove());
            flies = [];
            updateFlyCount();
            
            startBtn.disabled = false;
            startBtn.textContent = '‚ñ∂Ô∏è –ù–ê–ß–ê–¢–¨ –ò–ì–†–£';
            startBtn.style.background = 'linear-gradient(#ff9800, #f57c00)';
        });
        
        // –ö–ª–∏–∫ –ø–æ –ª—è–≥—É—à–∫–µ
        frog.addEventListener('click', catchFlies);
        
        // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –¥–æ–±–∞–≤–∏—Ç—å –¥–µ–º–æ-–º—É—à–∫—É
        setTimeout(() => {
            if (!gameActive) {
                createFly();
                createPopup('–ù–∞–∂–º–∏ "–ù–ê–ß–ê–¢–¨ –ò–ì–†–£"!', 
                    gameArea.offsetWidth / 2 - 60,
                    50
                );
            }
        }, 1000);
        
        // –°–æ–∑–¥–∞–≤–∞—Ç—å –º—É—à–∫–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
        setInterval(() => {
            if (gameActive && flies.length < 8 && Math.random() > 0.7) {
                createFly();
            }
        }, 3000);
        
        // –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Telegram
        if (typeof Telegram !== 'undefined' && Telegram.WebApp) {
            Telegram.WebApp.ready();
            Telegram.WebApp.expand();
            
            // –ö–Ω–æ–ø–∫–∞ "–ü–æ–¥–µ–ª–∏—Ç—å—Å—è"
            Telegram.WebApp.MainButton.setText('üéÆ –ò–≥—Ä–∞—Ç—å –µ—â–µ!');
            Telegram.WebApp.MainButton.onClick(() => {
                location.reload();
            });
            
            // –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å –∫–Ω–æ–ø–∫—É –ø—Ä–∏ —Ö–æ—Ä–æ—à–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç–µ
            setInterval(() => {
                if (score > 5 && gameActive) {
                    Telegram.WebApp.MainButton.show();
                }
            }, 5000);
        }
    </script>
</body>
</html>
